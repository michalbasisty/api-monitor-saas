# Test stage
FROM golang:1.20-alpine
WORKDIR /src

COPY go.mod go.sum* ./
RUN if [ -f go.mod ]; then go mod download && go mod tidy; fi

COPY . .

CMD ["go", "test", "./...", "-v"]
